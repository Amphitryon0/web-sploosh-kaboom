(this.webpackJsonpsplooshkaboom=this.webpackJsonpsplooshkaboom||[]).push([[0],{12:function(e,t,n){e.exports=n(30)},17:function(e,t,n){},19:function(e,t,n){},30:function(e,t,n){"use strict";n.r(t);var a,r=n(0),i=n.n(r),o=n(10),s=n.n(o),c=(n(17),n(8)),l=n(1),u=n.n(l),d=n(3),h=n(2),p=n(4),f=n(5),m=n(7),v=n(6),w=n(11),b=(n(19),null);var y=0;function g(e,t){var n=t(1*e.length);return(null!==b&&b.buffer===a.memory.buffer||(b=new Uint8Array(a.memory.buffer)),b).set(e,n/1),y=e.length,n}var x=null;function k(){return null!==x&&x.buffer===a.memory.buffer||(x=new Int32Array(a.memory.buffer)),x}var S=null;function R(e,t){return(null!==S&&S.buffer===a.memory.buffer||(S=new Float64Array(a.memory.buffer)),S).subarray(e/8,e/8+t)}function C(e,t,n){var r=g(e,a.__wbindgen_malloc),i=y,o=g(t,a.__wbindgen_malloc),s=y;a.calculate_probabilities(8,r,i,o,s,n);var c,l=k()[2],u=k()[3];return 0!==l&&(c=R(l,u).slice(),a.__wbindgen_free(l,8*u)),c}function E(e,t){return P.apply(this,arguments)}function P(){return(P=Object(h.a)(u.a.mark((function e(t,n){var a,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("function"===typeof Response&&t instanceof Response)){e.next=23;break}if("function"!==typeof WebAssembly.instantiateStreaming){e.next=15;break}return e.prev=2,e.next=5,WebAssembly.instantiateStreaming(t,n);case 5:return e.abrupt("return",e.sent);case 8:if(e.prev=8,e.t0=e.catch(2),"application/wasm"==t.headers.get("Content-Type")){e.next=14;break}console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",e.t0),e.next=15;break;case 14:throw e.t0;case 15:return e.next=17,t.arrayBuffer();case 17:return a=e.sent,e.next=20,WebAssembly.instantiate(a,n);case 20:return e.abrupt("return",e.sent);case 23:return e.next=25,WebAssembly.instantiate(t,n);case 25:if(!((r=e.sent)instanceof WebAssembly.Instance)){e.next=30;break}return e.abrupt("return",{instance:r,module:t});case 30:return e.abrupt("return",r);case 31:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function O(e){return M.apply(this,arguments)}function M(){return(M=Object(h.a)(u.a.mark((function e(t){var n,r,i,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},("string"===typeof t||"function"===typeof Request&&t instanceof Request||"function"===typeof URL&&t instanceof URL)&&(t=fetch(t)),e.t0=E,e.next=5,t;case 5:return e.t1=e.sent,e.t2=n,e.next=9,(0,e.t0)(e.t1,e.t2);case 9:return r=e.sent,i=r.instance,o=r.module,a=i.exports,O.__wbindgen_wasm_module=o,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _=O,F=n(20)(["#004","#070","#090","#0b0","#0d0","#0f0","#6f6"]),A=function(e){return Object(w.a)(Array(e).keys())},T=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"render",value:function(){var e=null!==this.props.best&&this.props.best[0]==this.props.x&&this.props.best[1]==this.props.y;return i.a.createElement("div",{key:this.props.x+","+this.props.y,style:{display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center",width:"70px",height:"70px",border:this.props.valid?"1px solid grey":"1px solid red",outline:e?"4px solid yellow":"",zIndex:e?1:0,fontFamily:"monospace",userSelect:"none",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",color:"white",opacity:this.props.opacity,backgroundColor:null===this.props.text?F(this.props.prob):"HIT"===this.props.text?"#a2a":"#44a"},onClick:this.props.onClick},null===this.props.text?(100*this.props.prob).toFixed(this.props.precision)+"%":this.props.text)}}]),n}(i.a.Component),I=_("/web-sploosh-kaboom/sploosh_wasm_bg.wasm");window.JUST_ONCE=!1;var B=null;function j(){return q.apply(this,arguments)}function q(){return(q=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==B){e.next=2;break}return e.abrupt("return");case 2:if(!B.readyToProcess()||!B.state.doVideoProcessing){e.next=5;break}return e.next=5,B.readBoardState();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return V.apply(this,arguments)}function V(){return(V=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:setTimeout(z,25);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.JUST_ONCE||z();var G=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){var e;return Object(p.a)(this,n),(e=t.call(this)).videoRef=i.a.createRef(),e.canvasRef=i.a.createRef(),e.outputCanvasRef=i.a.createRef(),e.hiddenAreaRef=i.a.createRef(),e.state=e.makeEmptyState(),e.bannerCache=new Map,e.doComputation(e.state.grid,e.state.squidsGotten),window.RECOMP=function(){e.bannerCache=new Map,e.getBoardRegistrationAndScale()},B=Object(d.a)(e),e.previouslyReadStates=[null,null,null],e}return Object(f.a)(n,[{key:"componentDidMount",value:function(){this.makeReferenceImageCanvases()}},{key:"makeReferenceImageCanvases",value:function(){var e=this,t=this.hiddenAreaRef.current;this.referenceCanvases={};for(var n=function(){var n=r[a],i=document.createElement("canvas");i.setAttribute("id","canvas_"+n),t.appendChild(i);var o=document.createElement("img");o.src="/web-sploosh-kaboom/images/"+n+".png",o.onload=function(){console.log("Width:",this.width,this.height,this),i.width=this.width,i.height=this.height,i.getContext("2d").drawImage(o,0,0)},e.referenceCanvases[n]=i},a=0,r=["hit","miss","killed_squid","remaining_squid","top_banner_new","bottom_banner_new"];a<r.length;a++)n()}},{key:"makeEmptyState",value:function(){for(var e=[],t=[],n=0;n<8;n++)for(var a=0;a<8;a++)e[[a,n]]=null,t[[a,n]]=0;return{grid:e,squidsGotten:"unknown",probs:t,best:[3,3],valid:!0,observationProb:1,screenRecordingActive:!1,doVideoProcessing:!1,lastComputationTime:-1,lastCVTime:-1}}},{key:"startScreenRecording",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,n,a,r,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.screenRecordingActive){e.next=3;break}return alert("Already screen capturing!"),e.abrupt("return");case 3:return t={video:{cursor:"always"},audio:!1},e.next=6,navigator.mediaDevices.getDisplayMedia(t);case 6:return n=e.sent,(a=this.videoRef.current).srcObject=n,a.play(),this.setState({screenRecordingActive:!0}),e.next=13,new Promise((function(e){return setTimeout(e,500)}));case 13:this.updateCapture(),r=this.canvasRef.current,i=this.outputCanvasRef.current,console.log(r,i,r.width,r.height),i.width=r.width,i.height=r.height,i.getContext("2d").drawImage(r,0,0);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toggleVideoProcessing",value:function(){if(this.state.screenRecordingActive)if(!1!==this.state.doVideoProcessing||this.readyToProcess()){if(this.setState({doVideoProcessing:!this.state.doVideoProcessing}),null!==this.previouslyReadStates[this.previouslyReadStates.length-1]){var e=this.previouslyReadStates[this.previouslyReadStates.length-1];this.setState(e),this.doComputation(e.grid,e.squidsGotten),this.previouslyReadStates[this.previouslyReadStates.length-1]=null}}else alert("You must first detect a board.")}},{key:"getBoardRegistrationAndScale",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.screenRecordingActive){e.next=2;break}return e.abrupt("return");case 2:this.updateCapture(),t=.375,n=.7,a=0;case 6:if(!(a<10)){e.next=15;break}return e.next=9,this.performGridSearch(t*(1-n),t*(1+2*n),0==a?20:1==a?10:4);case 9:this.boardFitParams=e.sent,t=this.boardFitParams.scale,n/=2;case 12:a++,e.next=6;break;case 15:return console.log("Best fit params:",this.boardFitParams),this.bannerCache.delete(t),this.testForTopBannerAtScale(t),this.testForBottomBanner(),console.log("Final fit params:",this.boardFitParams),e.next=22,new Promise((function(e){return setTimeout(e,100)}));case 22:this.setState({doVideoProcessing:!0});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"performGridSearch",value:function(){var e=Object(h.a)(u.a.mark((function e(t,n,a){var r,i,o,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={score:-1},i=0;case 2:if(!(i<a)){e.next=11;break}return o=t+i*(n-t)/(a-1),(s=this.testForTopBannerAtScale(o)).score>r.score&&(r=s),e.next=8,new Promise((function(e){return setTimeout(e,10)}));case 8:i++,e.next=2;break;case 11:return console.log("Grid search over:",t,"to",n,"got:",r),e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"testForBottomBanner",value:function(){var e=window.cv.imread("cv_canvasRef"),t=window.cv.imread("canvas_bottom_banner_new"),n=Math.round(t.size().width*this.boardFitParams.scale),a=Math.round(t.size().height*this.boardFitParams.scale),r=new window.cv.Mat,i=new window.cv.Size(n,a);window.cv.resize(t,r,i,0,0,window.cv.INTER_AREA);var o=new window.cv.Mat,s=new window.cv.Mat,c=window.cv.TM_CCOEFF_NORMED;window.cv.matchTemplate(e,r,o,c,s);var l=window.cv.minMaxLoc(o,s).maxLoc,u=new window.cv.Scalar(255,0,0,255),d=new window.cv.Point(l.x+r.cols,l.y+r.rows);window.cv.rectangle(e,l,d,u,2,window.cv.LINE_8,0),window.cv.imshow("cv_outputCanvasRef",e),e.delete(),t.delete(),r.delete(),o.delete(),s.delete(),this.boardFitParams.bottomBannerOffset={x:l.x,y:l.y}}},{key:"getCellXY",value:function(e,t){var n=(this.boardFitParams.bottomBannerOffset.y-this.boardFitParams.topBannerOffset.y)/(828*this.boardFitParams.scale);return(n<.95||n>1.05)&&(n=1),{x:this.boardFitParams.topBannerOffset.x+this.boardFitParams.scale*(161.5+75.5*e),y:this.boardFitParams.topBannerOffset.y+this.boardFitParams.scale*n*(239+78.6*t)}}},{key:"getSquidIndicatorXY",value:function(e){var t=(this.boardFitParams.bottomBannerOffset.y-this.boardFitParams.topBannerOffset.y)/(828*this.boardFitParams.scale);return(t<.95||t>1.05)&&(t=1),{x:this.boardFitParams.topBannerOffset.x+948*this.boardFitParams.scale,y:this.boardFitParams.topBannerOffset.y+this.boardFitParams.scale*t*(185+133*e)}}},{key:"getBoardRect",value:function(){var e=(this.boardFitParams.bottomBannerOffset.y-this.boardFitParams.topBannerOffset.y)/(828*this.boardFitParams.scale);return(e<.95||e>1.05)&&(e=1),new window.cv.Rect(Math.round(this.boardFitParams.topBannerOffset.x),Math.round(this.boardFitParams.topBannerOffset.y),Math.round(1040*this.boardFitParams.scale),Math.round(this.boardFitParams.scale*e*940))}},{key:"testForTopBannerAtScale",value:function(e){if(this.bannerCache.has(e))return this.bannerCache.get(e);var t=window.cv.imread("cv_canvasRef"),n=window.cv.imread("canvas_top_banner_new"),a=Math.round(n.size().width*e),r=Math.round(n.size().height*e),i=new window.cv.Mat,o=new window.cv.Size(a,r);window.cv.resize(n,i,o,0,0,window.cv.INTER_AREA);var s=new window.cv.Mat,c=new window.cv.Mat,l=window.cv.TM_CCOEFF_NORMED;window.cv.matchTemplate(t,i,s,l,c);var u=window.cv.minMaxLoc(s,c),d=u.maxLoc,h=new window.cv.Scalar(255,0,0,255),p=new window.cv.Point(d.x+i.cols,d.y+i.rows);window.cv.rectangle(t,d,p,h,2,window.cv.LINE_8,0),window.cv.imshow("cv_outputCanvasRef",t),t.delete(),n.delete(),i.delete(),s.delete(),c.delete();var f=u.maxVal;return this.bannerCache.set(e,f),{score:f,scale:e,topBannerOffset:{x:d.x,y:d.y}}}},{key:"readyToProcess",value:function(){return this.state.screenRecordingActive&&void 0!==this.boardFitParams&&this.boardFitParams.hasOwnProperty("bottomBannerOffset")}},{key:"readBoardState",value:function(){var e=Object(h.a)(u.a.mark((function e(){var t,n,a,r,i,o,s,l,d,h,p,f,m,v,w,b,y,g,x,k,S,R,C,E,P,O,M,_,F,A,T,I,B,j,q,z,V,G,N,L,U,W,D,H,Y,J,X,K,Z,$,Q,ee,te,ne,ae,re,ie,oe,se,ce;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ce=function(e,t){if(null===e||null===t)return!1;for(var n=e.squidsGotten===t.squidsGotten,a=0;a<8;a++)for(var r=0;r<8;r++)e.grid[[r,a]]!==t.grid[[r,a]]&&(n=!1);return n},this.readyToProcess()){e.next=3;break}return e.abrupt("return");case 3:for(t={grid:{},squidsGotten:0},this.updateCapture(),n=performance.now(),a=window.cv.imread("cv_canvasRef"),r=new window.cv.Size(3,3),window.cv.GaussianBlur(a,a,r,0,0,window.cv.BORDER_DEFAULT),i=[a],o=function(e,t){var n=a.ucharPtr(Math.round(t),Math.round(e)),r={r:n[0],g:n[1],b:n[2]},i=Math.sqrt(r.r*r.r+r.g*r.g+r.b*r.b);return Object(c.a)({},r,{energy:i})},s=new window.cv.Scalar(80,80,80,255),l=new window.cv.Scalar(255,0,255,255),d=new window.cv.Scalar(100,255,0,255),h=new window.cv.Scalar(255,100,100,255),p=new window.cv.Scalar(50,255,100,255),f=null,m=-1,v=0;v<8;v++)for(w=0;w<8;w++)b=this.getCellXY(w,v),(y=o(b.x,b.y+15)).energy>m&&(m=y.energy,f={x:w,y:v});for(g=0;g<8;g++)for(x=0;x<8;x++)k=this.getCellXY(x,g),S=k.x,R=k.y,2,C=o(S,R),E=o(S-2,R-2),P=o(S+2,R-2),O=o(S-2,R+2),M=o(S+2,R+2),_=x===f.x&&g===f.y,F=_||x===f.x+1&&g===f.y,A=_||x===f.x-1&&g===f.y,T=_||x===f.x&&g===f.y+1,I=_||x===f.x&&g===f.y-1,B=T||F,j=T||A,q=I||F,z=I||A,V=s,G=_?240:220,N=(C.energy>=G)+(E.energy>=(B?240:220))+(P.energy>=(j?240:220))+(O.energy>=(q?240:220))+(M.energy>=(q?240:220)),L=_?1:1.02,U=(C.g>=C.b*L)+(E.g>=E.b*(B?L:1.05))+(P.g>=P.b*(j?L:1.05))+(O.g>=O.b*(q?L:1.05))+(M.g>=M.b*(z?L:1.05)),t.grid[[x,g]]=null,(N>=4&&U>=3||N>=3&&U>=4)&&(W=Math.max(C.r,E.r,P.r,O.r,M.r),D=Math.max(C.g,E.g,P.g,O.g,M.g),W>1.25*D?(V=l,t.grid[[x,g]]="HIT"):(V=d,t.grid[[x,g]]="MISS")),window.JUST_ONCE&&(_&&console.log("INSIDE!!!!!"),console.log("Scores:",x,g,_,U,C,E,P,O,M)),H=new window.cv.Point(S-7,R-7),Y=new window.cv.Point(S+7,R+7),window.cv.rectangle(a,H,Y,V,1,window.cv.LINE_8,0);for(J=0;J<3;J++)X=this.getSquidIndicatorXY(J),K=X.x,Z=X.y,$=a.ucharPtr(Math.round(Z),Math.round(K)),Q={r:$[0],g:$[1],b:$[2]},ee=new window.cv.Point(K-15,Z-15),te=new window.cv.Point(K+15,Z+15),ne=p,Q.r>1.25*Q.b&&(ne=h,t.squidsGotten=Math.max(t.squidsGotten,J+1)),window.cv.rectangle(a,ee,te,ne,1,window.cv.LINE_8,0);for(ae=this.getBoardRect(),re=a.roi(ae),i.push(re),window.cv.imshow("cv_outputCanvasRef",re),ie=0,oe=i;ie<oe.length;ie++)oe[ie].delete();if(se=performance.now(),console.log("CV took: "+(se-n)+"ms"),this.setState({lastCVTime:se-n}),ce(this.previouslyReadStates[0],this.previouslyReadStates[1])||!ce(this.previouslyReadStates[1],this.previouslyReadStates[2])||!ce(this.previouslyReadStates[2],t)){e.next=33;break}return this.setState(t),e.next=33,this.doComputation(t.grid,t.squidsGotten);case 33:return this.previouslyReadStates.shift(),this.previouslyReadStates.push(t),e.abrupt("return",t);case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCapture",value:function(){var e=this.videoRef.current,t=this.canvasRef.current,n=t.getContext("2d"),a=Math.round(e.videoHeight/e.videoWidth*960);console.log("Native image capture shape: "+e.videoWidth+"x"+e.videoHeight+" -> scaling to: 960x"+a),t.width=960,t.height=a,n.drawImage(e,0,0,960,a)}},{key:"doComputation",value:function(){var e=Object(h.a)(u.a.mark((function e(t,n){var a,r,i,o,s,c,l,d,h,p,f,m,v,w,b,y,g,x,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=performance.now(),r=[],i=[],o=0;o<8;o++)for(s=0;s<8;s++)"HIT"===(c=t[[s,o]])&&r.push(8*o+s),"MISS"===c&&i.push(8*o+s);for(l=-1,d=0,h=["0","1","2"];d<h.length;d++)n!==(p=h[d])&&n!==Number(p)||(l=Number(p));return e.next=8,I;case 8:if(void 0!==(f=C(Uint8Array.from(r),Uint8Array.from(i),l))){for(m=0,v=0,w=-1,b=[],y=0;y<8;y++)for(g=0;g<8;g++)b[[g,y]]=f[8*y+g],null===t[[g,y]]&&f[8*y+g]>w&&(w=f[8*y+g],v=g,m=y);x=f[64],this.setState({probs:b,best:w>=0?[v,m]:null,valid:!0,observationProb:x})}k=performance.now(),this.setState({lastComputationTime:k-a});case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"onClick",value:function(e,t){var n=Object(c.a)({},this.state.grid),a=n[[e,t]];switch(a){case null:a="MISS";break;case"MISS":a="HIT";break;case"HIT":a=null}n[[e,t]]=a,this.setState({grid:n}),this.doComputation(n,this.state.squidsGotten)}},{key:"clearField",value:function(){var e=this.makeEmptyState();e.screenRecordingActive=this.state.screenRecordingActive,e.doVideoProcessing=this.state.doVideoProcessing,this.setState(e),this.doComputation(e.grid,e.squidsGotten)}},{key:"renderActualMap",value:function(e){var t=this;return i.a.createElement("div",{style:{display:"inline-block"}},A(8).map((function(n){return i.a.createElement("div",{key:n,style:{display:"flex"}},A(8).map((function(a){return i.a.createElement(T,{key:a+","+n,x:a,y:n,onClick:function(){return t.onClick(a,n)},text:t.state.grid[[a,n]],prob:t.state.probs[[a,n]],valid:t.state.valid,best:t.state.best,precision:e?0:2,opacity:e?.5+.3*t.state.probs[[a,n]]:void 0})})))})))}},{key:"renderOverlayMap",value:function(){if(this.state.doVideoProcessing)return i.a.createElement("div",{style:{position:"absolute",top:"210px",left:"127px",transform:"scale(1.01, 1.05)",zIndex:20,display:"inline-block"}},this.renderActualMap(!0))}},{key:"render",value:function(){for(var e=this,t=0,n=!0,a=0;a<8;a++)for(var r=0;r<8;r++)null!==this.state.grid[[r,a]]&&(t++,"HIT"===this.state.grid[[r,a]]&&(n=!1));return i.a.createElement("div",{style:{margin:"20px"}},i.a.createElement("span",{style:{fontSize:"150%",color:"white"}},"Shots used: ",t),i.a.createElement("br",null),this.state.doVideoProcessing||this.renderActualMap(!1),this.state.valid||i.a.createElement("div",{style:{fontSize:"150%",color:"white"}},"Invalid configuration! This is not possible."),i.a.createElement("br",null),i.a.createElement("div",{style:{fontSize:"150%"}},i.a.createElement("span",{style:{color:"white"}},"Number of squids killed:"),i.a.createElement("select",{style:{marginLeft:"20px",fontSize:"100%"},value:this.state.squidsGotten,onChange:function(t){e.setState({squidsGotten:t.target.value}),e.doComputation(e.state.grid,t.target.value)}},i.a.createElement("option",{value:"unknown"},"Unknown"),i.a.createElement("option",{value:"0"},"0"),i.a.createElement("option",{value:"1"},"1"),i.a.createElement("option",{value:"2"},"2")),i.a.createElement("br",null)),i.a.createElement("br",null),i.a.createElement("button",{style:{fontSize:"150%",margin:"10px"},onClick:function(){e.clearField()}},"Reset"),i.a.createElement("br",null),n&&!this.state.screenRecordingActive&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{color:"white",fontSize:"120%",marginTop:"20px"}},"Opening optimizer: Probability that this",i.a.createElement("br",null),"pattern would get at least one hit: ",this.state.valid?(100*Math.max(0,1-this.state.observationProb)).toFixed(2)+"%":"Invalid")),i.a.createElement("br",null),i.a.createElement("hr",null),i.a.createElement("button",{style:{fontSize:"150%",margin:"10px"},onClick:function(){e.startScreenRecording()}},"Start Screen Cap"),i.a.createElement("button",{disabled:!this.state.screenRecordingActive,style:{fontSize:"150%",margin:"10px"},onClick:function(){e.bannerCache=new Map,e.getBoardRegistrationAndScale()}},"Detect Board"),i.a.createElement("button",{disabled:!this.state.screenRecordingActive,style:{fontSize:"150%",margin:"10px"},onClick:function(){e.toggleVideoProcessing()}},this.state.doVideoProcessing?"Stop Processing (p)":"Start Processing (p)"),i.a.createElement("br",null),i.a.createElement("video",{style:{display:"none"},ref:this.videoRef},"Video stream not available."),i.a.createElement("canvas",{style:{display:"none"},ref:this.canvasRef,id:"cv_canvasRef"}),i.a.createElement("div",{style:{display:"inline-block"}},i.a.createElement("div",{style:{display:"inline-block",position:"relative"}},i.a.createElement("canvas",{style:{border:this.state.doVideoProcessing?"5px solid red":"5px solid blue",width:"1000px"},ref:this.outputCanvasRef,id:"cv_outputCanvasRef"}),this.renderOverlayMap())),i.a.createElement("br",null),i.a.createElement("span",{style:{color:"white"}},"Last CV time: ",this.state.lastCVTime,"ms - Last recompute time: ",this.state.lastComputationTime,"ms"),i.a.createElement("div",{style:{display:"none"},ref:this.hiddenAreaRef}))}}]),n}(i.a.Component);document.addEventListener("keydown",(function(e){"p"===e.key&&null!==B&&B.toggleVideoProcessing()}));var N=function(e){Object(m.a)(n,e);var t=Object(v.a)(n);function n(){return Object(p.a)(this,n),t.apply(this,arguments)}return Object(f.a)(n,[{key:"componentDidMount",value:function(){document.body.style.backgroundColor="#666"}},{key:"render",value:function(){return i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("div",{style:{display:"inline-block",width:"600px"}},i.a.createElement("h1",{style:{color:"white"}},"Sploosh Kaboom Probability Calculator"),i.a.createElement("p",{style:{color:"white"}},"This page gives exact probabilities (no approximation) of hitting a squid in each cell, given the observation of hits, misses, and completed squid kills. Click on the map to cycle a cell between HIT and MISS. You can also set the number of squids completely killed in the drop-down menu at the bottom. You should set this to the value you see in the game for the number of squids killed. This will yield slightly more accurate probabilities. The highest probability location to play will be shown with a yellow outline. If you play perfectly according to picking the highlighted cell you will win in 20 or fewer shots \u224818.5% of the time.")),i.a.createElement(G,null),i.a.createElement("span",{style:{color:"white"}},"Made by Peter Schmidt-Nielsen and CryZe (v0.0.1)"))}}]),n}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[12,1,2]]]);
//# sourceMappingURL=main.b592eb51.chunk.js.map